{% extends "layout.html" %}
{% load static %}

{% block title %}Track Your Order - SoundSphere{% endblock %}

{% block body %}
<div class="container py-5">
    <div class="row mb-5">
        <div class="col-12">
            <h1 class="fw-bold">Track Your Order</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'Home:home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Order Tracking</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center mb-5">
        <div class="col-md-8 col-lg-6">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h4 class="mb-4 text-center">Enter Your Order Details</h4>
                    <form id="trackingForm" action="#" method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="orderNumber" class="form-label">Order Number</label>
                            <input type="text" class="form-control" id="orderNumber" name="orderNumber" placeholder="e.g. SS-123456" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Your email address" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Track Order</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Status Demo - This would normally be shown after form submission -->
    <div class="row justify-content-center mb-5" id="orderStatusDemo">
        <div class="col-md-10">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Order #SS-123456</h5>
                        <span class="badge bg-light text-primary">In Transit</span>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <h6 class="text-muted mb-2">Order Placed</h6>
                            <p class="mb-0">November 15, 2023</p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-muted mb-2">Estimated Delivery</h6>
                            <p class="mb-0">November 22, 2023</p>
                        </div>
                    </div>

                    <!-- Delivery Progress -->
                    <div class="delivery-progress mb-4">
                        <div class="progress-track">
                            <ul id="progressbar">
                                <li class="step0 active" id="step1">Order Confirmed</li>
                                <li class="step0 active" id="step2">Processing</li>
                                <li class="step0 active text-center" id="step3">Shipped</li>
                                <li class="step0 text-right" id="step4">Delivered</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Order Timeline -->
                    <div class="order-timeline">
                        <div class="timeline-item">
                            <div class="timeline-point"></div>
                            <div class="timeline-content">
                                <p class="date">November 15, 2023 - 10:30 AM</p>
                                <h6>Order Confirmed</h6>
                                <p>Your order has been received and confirmed.</p>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-point"></div>
                            <div class="timeline-content">
                                <p class="date">November 16, 2023 - 2:15 PM</p>
                                <h6>Order Processed</h6>
                                <p>Your order has been processed and is being prepared for shipping.</p>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-point active"></div>
                            <div class="timeline-content">
                                <p class="date">November 18, 2023 - 9:45 AM</p>
                                <h6>Order Shipped</h6>
                                <p>Your order has been shipped via Express Shipping. Tracking number: <strong>TRK728394093</strong></p>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-point inactive"></div>
                            <div class="timeline-content inactive">
                                <p class="date">Estimated: November 22, 2023</p>
                                <h6>Delivery</h6>
                                <p>Your order will be delivered to your shipping address.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Order Details Accordion -->
                    <div class="accordion mt-4" id="orderDetails">
                        <div class="accordion-item border-0">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    View Order Details
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#orderDetails">
                                <div class="accordion-body">
                                    <div class="table-responsive">
                                        <table class="table table-borderless">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Product</th>
                                                    <th scope="col">Quantity</th>
                                                    <th scope="col" class="text-end">Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Premium Wireless Headphones</td>
                                                    <td>1</td>
                                                    <td class="text-end">$199.99</td>
                                                </tr>
                                                <tr>
                                                    <td>Bluetooth Speaker</td>
                                                    <td>1</td>
                                                    <td class="text-end">$129.99</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" class="text-end">Subtotal</td>
                                                    <td class="text-end">$329.98</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" class="text-end">Shipping</td>
                                                    <td class="text-end">$12.99</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" class="text-end"><strong>Total</strong></td>
                                                    <td class="text-end"><strong>$342.97</strong></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <div class="d-flex justify-content-between">
                        <a href="#" class="btn btn-outline-primary">Contact Support</a>
                        <a href="#" class="btn btn-outline-secondary">Return to My Orders</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Section -->
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body text-center p-4">
                    <div class="mb-3">
                        <i class="fas fa-question-circle text-primary fa-3x"></i>
                    </div>
                    <h5>Need Help?</h5>
                    <p>Our customer support team is available 24/7 to assist you with any questions about your order.</p>
                    <a href="#" class="btn btn-outline-primary">Contact Support</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body text-center p-4">
                    <div class="mb-3">
                        <i class="fas fa-exchange-alt text-primary fa-3x"></i>
                    </div>
                    <h5>Returns & Exchanges</h5>
                    <p>Unhappy with your purchase? Start the return or exchange process and get help with shipping.</p>
                    <a href="#" class="btn btn-outline-primary">Return Policy</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body text-center p-4">
                    <div class="mb-3">
                        <i class="fas fa-truck text-primary fa-3x"></i>
                    </div>
                    <h5>Shipping Info</h5>
                    <p>Learn about our shipping methods, estimated delivery times, and shipping rates.</p>
                    <a href="#" class="btn btn-outline-primary">Shipping Details</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Progress Bar */
    #progressbar {
        margin-bottom: 30px;
        overflow: hidden;
        color: var(--bs-primary);
        padding-left: 0px;
        margin-top: 30px;
    }

    #progressbar li {
        list-style-type: none;
        font-size: 15px;
        width: 25%;
        float: left;
        position: relative;
        font-weight: 400;
    }

    #progressbar .step0:before {
        content: "";
        color: var(--bs-primary);
        width: 20px;
        height: 20px;
        margin-left: 0px !important;
    }

    #progressbar li:before {
        width: 20px;
        height: 20px;
        line-height: 45px;
        display: block;
        font-size: 20px;
        background: #c5cae9;
        border-radius: 50%;
        margin: auto;
        z-index: 55;
        position: relative;
    }

    #progressbar li:after {
        content: '';
        width: 100%;
        height: 3px;
        background: #c5cae9;
        position: absolute;
        left: 0%;
        right: 0%;
        top: 10px;
        z-index: 1;
    }

    #progressbar li:first-child:after {
        left: 50%;
    }

    #progressbar li:last-child:after {
        width: 50%;
    }

    #progressbar li.active:after,
    #progressbar li.active:before {
        background: var(--bs-primary);
    }

    #progressbar li.active:before {
        font-family: FontAwesome;
        content: "\f00c";
    }

    /* Timeline */
    .order-timeline {
        position: relative;
        padding-left: 30px;
        margin-top: 30px;
    }

    .order-timeline::before {
        content: '';
        position: absolute;
        left: 9px;
        top: 0;
        height: 100%;
        width: 2px;
        background-color: #e0e0e0;
    }

    .timeline-item {
        position: relative;
        margin-bottom: 25px;
    }

    .timeline-point {
        position: absolute;
        left: -30px;
        top: 3px;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: var(--bs-primary);
        border: 3px solid #fff;
        box-shadow: 0 0 0 1px #e0e0e0;
    }

    .timeline-point.inactive {
        background-color: #e0e0e0;
    }

    .timeline-content {
        background-color: #f9f9f9;
        padding: 15px;
        border-radius: 4px;
    }

    .timeline-content.inactive {
        opacity: 0.7;
    }

    .timeline-content p.date {
        margin-bottom: 5px;
        font-size: 0.85rem;
        color: #757575;
    }

    .timeline-content h6 {
        margin-bottom: 10px;
        font-weight: 600;
    }

    @media (min-width: 768px) {
        #progressbar li {
            font-size: 16px;
        }
    }
</style>

<script>
    // For demo purposes only - toggle the order status visibility
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('trackingForm');
        const statusDemo = document.getElementById('orderStatusDemo');
        
        // Initially hide the demo
        statusDemo.style.display = 'none';
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            // Show the demo order status
            statusDemo.style.display = 'flex';
            // Scroll to it
            statusDemo.scrollIntoView({ behavior: 'smooth' });
        });
    });
</script>
{% endblock %} 