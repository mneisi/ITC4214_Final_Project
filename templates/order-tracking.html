{% extends "layout.html" %}
{% load static %}

{% block title %}Track Your Order - SoundSphere{% endblock %}

{% block body %}
<div class="container py-5">
    <!-- Header Section -->
    <div class="row mb-5">
        <div class="col-12">
            <h1 class="fw-bold">Track Your Order</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'Home:home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Order Tracking</li>
                </ol>
            </nav>
        </div>
    </div>
    
    <div class="row g-5">
        <!-- Tracking Form Section -->
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-body p-4 p-md-5">
                    <h2 class="h3 mb-4 text-center">Enter Your Order Details</h2>
                    
                    <form id="orderTrackingForm">
                        <div class="mb-4">
                            <label for="orderNumber" class="form-label">Order Number</label>
                            <input type="text" class="form-control form-control-lg" id="orderNumber" placeholder="e.g., ORD-12345678" required>
                            <div class="invalid-feedback">Please enter your order number</div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="orderEmail" class="form-label">Email Address</label>
                            <input type="email" class="form-control form-control-lg" id="orderEmail" placeholder="The email used for your order" required>
                            <div class="invalid-feedback">Please enter a valid email address</div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Track My Order</button>
                        </div>
                    </form>
                    
                    <div class="text-center mt-4">
                        <p class="mb-0 text-muted">Having trouble? <a href="{% url 'contact' %}">Contact our support team</a></p>
                    </div>
                </div>
            </div>
            
            <!-- Order Tracking Result (hidden by default) -->
            <div id="trackingResult" class="card border-0 shadow-sm rounded-4 mt-4" style="display: none;">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3 class="h4 mb-0">Order #<span id="displayOrderNumber"></span></h3>
                        <span class="badge bg-primary px-3 py-2" id="orderStatus">Processing</span>
                    </div>
                    
                    <div class="mb-4">
                        <p class="mb-1"><strong>Order Date:</strong> <span id="orderDate">June 12, 2023</span></p>
                        <p class="mb-1"><strong>Estimated Delivery:</strong> <span id="estimatedDelivery">June 18, 2023</span></p>
                        <p class="mb-0"><strong>Shipping Method:</strong> <span id="shippingMethod">Express Shipping (2-3 business days)</span></p>
                    </div>
                    
                    <div class="tracking-progress mb-4">
                        <div class="tracking-progress-bar">
                            <div class="progress-step active" data-step="1">
                                <div class="step-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="step-label">Order Placed</div>
                            </div>
                            <div class="progress-step active" data-step="2">
                                <div class="step-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="step-label">Processing</div>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="step-icon">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="step-label">Shipped</div>
                            </div>
                            <div class="progress-step" data-step="4">
                                <div class="step-icon">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="step-label">In Transit</div>
                            </div>
                            <div class="progress-step" data-step="5">
                                <div class="step-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="step-label">Delivered</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tracking-updates">
                        <h4 class="h5 mb-3">Tracking Updates</h4>
                        <div class="tracking-timeline">
                            <div class="timeline-item">
                                <div class="timeline-date">Jun 12, 2023 - 10:23 AM</div>
                                <div class="timeline-content">
                                    <div class="timeline-title">Order Confirmed</div>
                                    <div class="timeline-desc">Your order has been received and confirmed</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-date">Jun 12, 2023 - 2:45 PM</div>
                                <div class="timeline-content">
                                    <div class="timeline-title">Payment Approved</div>
                                    <div class="timeline-desc">Your payment has been approved and your order is being processed</div>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-date">Jun 13, 2023 - 9:30 AM</div>
                                <div class="timeline-content">
                                    <div class="timeline-title">Order Processing</div>
                                    <div class="timeline-desc">Your order is being prepared for shipping</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Shipping & FAQ Information -->
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-body p-4 p-md-5">
                    <h2 class="h3 mb-4">Shipping & Delivery Information</h2>
                    
                    <div class="accordion" id="shippingAccordion">
                        <div class="accordion-item border-0 mb-3">
                            <h3 class="accordion-header">
                                <button class="accordion-button rounded-3" type="button" data-bs-toggle="collapse" data-bs-target="#shippingOptions" aria-expanded="true" aria-controls="shippingOptions">
                                    Shipping Options
                                </button>
                            </h3>
                            <div id="shippingOptions" class="accordion-collapse collapse show" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body pt-0">
                                    <div class="shipping-option d-flex align-items-start mb-3">
                                        <div class="shipping-icon me-3 text-primary">
                                            <i class="fas fa-truck"></i>
                                        </div>
                                        <div>
                                            <h4 class="h6 mb-1">Standard Shipping</h4>
                                            <p class="mb-0 small text-muted">5-7 business days - Free on orders over $50</p>
                                        </div>
                                    </div>
                                    <div class="shipping-option d-flex align-items-start mb-3">
                                        <div class="shipping-icon me-3 text-primary">
                                            <i class="fas fa-shipping-fast"></i>
                                        </div>
                                        <div>
                                            <h4 class="h6 mb-1">Express Shipping</h4>
                                            <p class="mb-0 small text-muted">2-3 business days - $9.99</p>
                                        </div>
                                    </div>
                                    <div class="shipping-option d-flex align-items-start">
                                        <div class="shipping-icon me-3 text-primary">
                                            <i class="fas fa-bolt"></i>
                                        </div>
                                        <div>
                                            <h4 class="h6 mb-1">Next Day Delivery</h4>
                                            <p class="mb-0 small text-muted">Next business day - $19.99 (order by 2PM)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item border-0 mb-3">
                            <h3 class="accordion-header">
                                <button class="accordion-button collapsed rounded-3" type="button" data-bs-toggle="collapse" data-bs-target="#trackingFAQ" aria-expanded="false" aria-controls="trackingFAQ">
                                    Order Tracking FAQ
                                </button>
                            </h3>
                            <div id="trackingFAQ" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body pt-0">
                                    <div class="mb-3">
                                        <h4 class="h6 mb-2">How can I track my order?</h4>
                                        <p class="small mb-0">You can track your order by entering your order number and email address in the tracking form on this page. Your order number can be found in your order confirmation email.</p>
                                    </div>
                                    <div class="mb-3">
                                        <h4 class="h6 mb-2">When will my order ship?</h4>
                                        <p class="small mb-0">Orders are typically processed within 1-2 business days. Once your order ships, you will receive a shipping confirmation email with tracking information.</p>
                                    </div>
                                    <div class="mb-3">
                                        <h4 class="h6 mb-2">Can I change my shipping address?</h4>
                                        <p class="small mb-0">If your order hasn't shipped yet, please contact our customer support team immediately to request an address change. Once an order has shipped, we cannot change the delivery address.</p>
                                    </div>
                                    <div>
                                        <h4 class="h6 mb-2">My tracking information hasn't updated. What should I do?</h4>
                                        <p class="small mb-0">Tracking information may take 24-48 hours to update after your order has shipped. If it's been longer than 48 hours and you haven't seen any updates, please contact our customer support team.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item border-0 mb-3">
                            <h3 class="accordion-header">
                                <button class="accordion-button collapsed rounded-3" type="button" data-bs-toggle="collapse" data-bs-target="#internationalShipping" aria-expanded="false" aria-controls="internationalShipping">
                                    International Shipping
                                </button>
                            </h3>
                            <div id="internationalShipping" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body pt-0">
                                    <p class="small mb-3">We ship to over 50 countries worldwide. International shipping rates and delivery times vary by location.</p>
                                    
                                    <div class="mb-3">
                                        <h4 class="h6 mb-2">Estimated Delivery Times</h4>
                                        <ul class="small ps-3 mb-0">
                                            <li>Canada & Mexico: 7-10 business days</li>
                                            <li>Europe: 10-15 business days</li>
                                            <li>Asia Pacific: 12-18 business days</li>
                                            <li>Rest of World: 15-21 business days</li>
                                        </ul>
                                    </div>
                                    
                                    <div>
                                        <h4 class="h6 mb-2">Customs & Import Duties</h4>
                                        <p class="small mb-0">International orders may be subject to customs fees and import duties, which are the responsibility of the recipient. These fees are collected when your package arrives in your country and are not included in our shipping charges.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item border-0">
                            <h3 class="accordion-header">
                                <button class="accordion-button collapsed rounded-3" type="button" data-bs-toggle="collapse" data-bs-target="#returnsRefunds" aria-expanded="false" aria-controls="returnsRefunds">
                                    Returns & Refunds
                                </button>
                            </h3>
                            <div id="returnsRefunds" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                                <div class="accordion-body pt-0">
                                    <p class="small mb-3">We want you to be completely satisfied with your purchase. If you're not, we offer a hassle-free return policy:</p>
                                    
                                    <div class="mb-3">
                                        <h4 class="h6 mb-2">Return Policy</h4>
                                        <ul class="small ps-3 mb-0">
                                            <li>Returns accepted within 30 days of delivery</li>
                                            <li>Item must be in original, unused condition with all packaging</li>
                                            <li>Free returns on eligible items (return shipping label provided)</li>
                                            <li>Refunds are processed within 5-7 business days after we receive your return</li>
                                        </ul>
                                    </div>
                                    
                                    <div>
                                        <h4 class="h6 mb-2">How to Initiate a Return</h4>
                                        <p class="small mb-0">To initiate a return, please visit our <a href="{% url 'contact' %}">Contact Us</a> page or email us at support@soundsphere.com with your order number and reason for return. Our team will provide you with a return authorization and detailed instructions.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-light rounded-3">
                        <div class="d-flex align-items-center">
                            <div class="me-3 text-primary">
                                <i class="fas fa-headset fa-2x"></i>
                            </div>
                            <div>
                                <h4 class="h6 mb-1">Need Additional Help?</h4>
                                <p class="small mb-0">Our customer support team is available Monday-Friday, 9am-6pm EST. <a href="{% url 'contact' %}">Contact us</a> or call (800) 555-1234.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Order tracking progress bar styles */
    .tracking-progress-bar {
        display: flex;
        justify-content: space-between;
        position: relative;
        margin-bottom: 30px;
    }
    
    .tracking-progress-bar::before {
        content: '';
        position: absolute;
        top: 30px;
        left: 0;
        right: 0;
        height: 2px;
        background-color: #e9ecef;
        z-index: 1;
    }
    
    .progress-step {
        position: relative;
        z-index: 2;
        flex: 1;
        text-align: center;
    }
    
    .step-icon {
        width: 60px;
        height: 60px;
        background-color: #e9ecef;
        border-radius: 50%;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #adb5bd;
        font-size: 20px;
        transition: all 0.3s ease;
    }
    
    .progress-step.active .step-icon {
        background-color: var(--bs-primary);
        color: white;
    }
    
    .step-label {
        font-size: 0.85rem;
        color: #6c757d;
        font-weight: 500;
    }
    
    .progress-step.active .step-label {
        color: var(--bs-primary);
        font-weight: 600;
    }
    
    /* Tracking timeline styles */
    .tracking-timeline {
        position: relative;
        padding-left: 20px;
    }
    
    .tracking-timeline::before {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 8px;
        width: 2px;
        background-color: #e9ecef;
    }
    
    .timeline-item {
        position: relative;
        padding-bottom: 20px;
    }
    
    .timeline-item:last-child {
        padding-bottom: 0;
    }
    
    .timeline-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: -12px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background-color: var(--bs-primary);
        z-index: 2;
    }
    
    .timeline-date {
        font-size: 0.8rem;
        color: #6c757d;
        margin-bottom: 5px;
    }
    
    .timeline-title {
        font-weight: 600;
        margin-bottom: 2px;
    }
    
    .timeline-desc {
        font-size: 0.9rem;
        color: #6c757d;
    }
    
    /* Shipping icon styles */
    .shipping-icon {
        font-size: 1.5rem;
        min-width: 30px;
    }
    
    /* Accordion styles */
    .accordion-button {
        box-shadow: none !important;
        background-color: rgba(var(--bs-primary-rgb), 0.05);
        font-weight: 600;
    }
    
    .accordion-button:not(.collapsed) {
        color: var(--bs-primary);
        background-color: rgba(var(--bs-primary-rgb), 0.1);
    }
    
    /* Responsive adjustments for smaller screens */
    @media (max-width: 767.98px) {
        .tracking-progress-bar {
            display: none;
        }
        
        .step-label {
            display: none;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const trackingForm = document.getElementById('orderTrackingForm');
        const trackingResult = document.getElementById('trackingResult');
        const displayOrderNumber = document.getElementById('displayOrderNumber');
        
        trackingForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const orderNumber = document.getElementById('orderNumber').value;
            const orderEmail = document.getElementById('orderEmail').value;
            
            // Validate form
            let isValid = true;
            
            if (!orderNumber) {
                document.getElementById('orderNumber').classList.add('is-invalid');
                isValid = false;
            } else {
                document.getElementById('orderNumber').classList.remove('is-invalid');
            }
            
            if (!orderEmail || !orderEmail.includes('@')) {
                document.getElementById('orderEmail').classList.add('is-invalid');
                isValid = false;
            } else {
                document.getElementById('orderEmail').classList.remove('is-invalid');
            }
            
            if (isValid) {
                // In a real application, this would make an API call to fetch order data
                // For demo purposes, we'll show a mock result
                displayOrderNumber.textContent = orderNumber;
                
                // Add a loading state
                const submitBtn = trackingForm.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...';
                submitBtn.disabled = true;
                
                // Simulate API call delay
                setTimeout(function() {
                    // Reset button
                    submitBtn.innerHTML = 'Track My Order';
                    submitBtn.disabled = false;
                    
                    // Show tracking result
                    trackingResult.style.display = 'block';
                    
                    // Scroll to result
                    trackingResult.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 1500);
            }
        });
    });
</script>
{% endblock %} 