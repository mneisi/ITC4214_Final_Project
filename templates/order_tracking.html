{% extends "layout.html" %}
{% load static %}

{% block title %}Track Your Order - SoundSphere{% endblock %}

{% block body %}
<div class="container py-5">
    <!-- Header Section -->
    <div class="row mb-5">
        <div class="col-12">
            <h1 class="fw-bold">Track Your Order</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'Home:home' %}">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Order Tracking</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- Tracking Form Section -->
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card border-0 shadow-sm mb-5">
                <div class="card-body p-4 p-md-5">
                    <h2 class="h3 mb-4 text-center">Enter Your Order Details</h2>
                    
                    <form id="tracking-form" class="needs-validation" novalidate>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="order-number" class="form-label">Order Number <span class="text-danger">*</span></label>
                                <input type="text" class="form-control form-control-lg" id="order-number" placeholder="e.g. SO-12345678" required>
                                <div class="invalid-feedback">
                                    Please enter your order number.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                                <input type="email" class="form-control form-control-lg" id="email" placeholder="e.g. you@example.com" required>
                                <div class="invalid-feedback">
                                    Please enter a valid email address.
                                </div>
                            </div>
                            <div class="col-12 mt-4">
                                <button type="submit" class="btn btn-primary btn-lg w-100">Track Order</button>
                            </div>
                        </div>
                    </form>
                    
                    <div class="text-center mt-4">
                        <p class="text-muted mb-0">Can't find your order number?</p>
                        <p class="mb-0">Check your confirmation email or <a href="{% url 'Home:contact' %}">contact our support team</a>.</p>
                    </div>
                </div>
            </div>
            
            <!-- Order Status (Hidden by default, shown after form submission) -->
            <div id="order-status" class="card border-0 shadow-sm mb-5" style="display: none;">
                <div class="card-body p-4 p-md-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="h3 mb-0">Order #<span id="display-order-number">SO-12345678</span></h2>
                        <span class="badge bg-success py-2 px-3">In Transit</span>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5 class="text-muted mb-2">Estimated Delivery</h5>
                            <p class="fw-bold mb-0">December 15, 2023</p>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-muted mb-2">Shipping Method</h5>
                            <p class="fw-bold mb-0">Express Shipping (2-3 business days)</p>
                        </div>
                    </div>
                    
                    <!-- Order Tracking Progress -->
                    <div class="tracking-progress mb-5">
                        <div class="tracking-progress-bar"></div>
                        <div class="tracking-steps">
                            <div class="tracking-step completed">
                                <div class="tracking-step-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="tracking-step-content">
                                    <h6 class="mb-1">Order Placed</h6>
                                    <p class="small text-muted mb-0">Dec 10, 2023</p>
                                </div>
                            </div>
                            <div class="tracking-step completed">
                                <div class="tracking-step-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="tracking-step-content">
                                    <h6 class="mb-1">Processing</h6>
                                    <p class="small text-muted mb-0">Dec 11, 2023</p>
                                </div>
                            </div>
                            <div class="tracking-step completed current">
                                <div class="tracking-step-icon">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="tracking-step-content">
                                    <h6 class="mb-1">In Transit</h6>
                                    <p class="small text-muted mb-0">Dec 12, 2023</p>
                                </div>
                            </div>
                            <div class="tracking-step">
                                <div class="tracking-step-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="tracking-step-content">
                                    <h6 class="mb-1">Delivered</h6>
                                    <p class="small text-muted mb-0">Expected Dec 15, 2023</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Shipping Details -->
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card border-0 bg-light">
                                <div class="card-body p-3">
                                    <h5 class="card-title mb-3">Shipping Address</h5>
                                    <address class="mb-0">
                                        <strong>John Doe</strong><br>
                                        123 Main Street<br>
                                        Apt 4B<br>
                                        New York, NY 10001<br>
                                        United States<br>
                                        <abbr title="Phone">P:</abbr> (123) 456-7890
                                    </address>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card border-0 bg-light">
                                <div class="card-body p-3">
                                    <h5 class="card-title mb-3">Order Summary</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between bg-transparent px-0">
                                            <span>SoundSphere Pro Headphones x1</span>
                                            <span>$299.99</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between bg-transparent px-0">
                                            <span>SoundSphere Mini Speaker x1</span>
                                            <span>$149.99</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between bg-transparent px-0">
                                            <span>Shipping</span>
                                            <span>$15.00</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between bg-transparent px-0 fw-bold">
                                            <span>Total</span>
                                            <span>$464.98</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Shipment Tracking -->
                    <div class="mt-4">
                        <h5>Shipment Updates</h5>
                        <div class="timeline-tracking mt-3">
                            <div class="timeline-tracking-item">
                                <div class="timeline-tracking-dot"></div>
                                <div class="timeline-tracking-content">
                                    <h6 class="mb-1">Package in transit to destination</h6>
                                    <p class="text-muted mb-0">Dec 12, 2023 - 2:45 PM</p>
                                    <p class="mb-0">Your package is on the way to your delivery address.</p>
                                </div>
                            </div>
                            <div class="timeline-tracking-item">
                                <div class="timeline-tracking-dot"></div>
                                <div class="timeline-tracking-content">
                                    <h6 class="mb-1">Package has left our facility</h6>
                                    <p class="text-muted mb-0">Dec 11, 2023 - 3:30 PM</p>
                                    <p class="mb-0">Your package was loaded onto a delivery vehicle.</p>
                                </div>
                            </div>
                            <div class="timeline-tracking-item">
                                <div class="timeline-tracking-dot"></div>
                                <div class="timeline-tracking-content">
                                    <h6 class="mb-1">Package processed at distribution center</h6>
                                    <p class="text-muted mb-0">Dec 11, 2023 - 10:15 AM</p>
                                    <p class="mb-0">Your package has been processed and is being prepared for shipment.</p>
                                </div>
                            </div>
                            <div class="timeline-tracking-item">
                                <div class="timeline-tracking-dot"></div>
                                <div class="timeline-tracking-content">
                                    <h6 class="mb-1">Order processed</h6>
                                    <p class="text-muted mb-0">Dec 10, 2023 - 2:30 PM</p>
                                    <p class="mb-0">Your order has been processed and payment has been confirmed.</p>
                                </div>
                            </div>
                            <div class="timeline-tracking-item">
                                <div class="timeline-tracking-dot"></div>
                                <div class="timeline-tracking-content">
                                    <h6 class="mb-1">Order placed</h6>
                                    <p class="text-muted mb-0">Dec 10, 2023 - 1:45 PM</p>
                                    <p class="mb-0">Thank you for your order! We've received your purchase request.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-5">
                        <p class="mb-4">Need assistance with your order?</p>
                        <div class="d-flex flex-wrap justify-content-center gap-2">
                            <a href="{% url 'Home:contact' %}" class="btn btn-outline-primary">Contact Support</a>
                            <button class="btn btn-light" id="track-another">Track Another Order</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FAQ Section -->
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto">
            <h3 class="text-center mb-4">Frequently Asked Questions</h3>
            
            <div class="accordion" id="trackingFAQ">
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                            How can I track my order?
                        </button>
                    </h2>
                    <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#trackingFAQ">
                        <div class="accordion-body">
                            To track your order, you'll need your order number and the email address you used during checkout. Enter these details in the tracking form above to see your order's current status and delivery timeline.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                            Where can I find my order number?
                        </button>
                    </h2>
                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#trackingFAQ">
                        <div class="accordion-body">
                            Your order number can be found in the order confirmation email we sent you after your purchase. It typically starts with "SO-" followed by 8 digits. If you can't find your confirmation email, please contact our customer support team for assistance.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                            How long does shipping take?
                        </button>
                    </h2>
                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#trackingFAQ">
                        <div class="accordion-body">
                            Shipping times vary depending on your location and the shipping method selected at checkout:
                            <ul class="mt-2">
                                <li>Standard Shipping: 5-7 business days</li>
                                <li>Express Shipping: 2-3 business days</li>
                                <li>Next-Day Shipping: 1 business day (if ordered before 2 PM)</li>
                            </ul>
                            Please note that these are estimated delivery timeframes and may vary during peak seasons or due to unforeseen circumstances.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                            Can I change my shipping address after placing an order?
                        </button>
                    </h2>
                    <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#trackingFAQ">
                        <div class="accordion-body">
                            We can only change your shipping address if your order hasn't been processed yet. If your order status is still "Processing," please contact our customer support team immediately with your order number and the new shipping address. Once an order has been shipped, we cannot change the delivery address.
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item border-0 shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                            What should I do if my order is delayed?
                        </button>
                    </h2>
                    <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#trackingFAQ">
                        <div class="accordion-body">
                            If your order is taking longer than the estimated delivery time, please check the tracking information first for any updates or delivery exceptions. If the tracking hasn't been updated for more than 48 hours or if your package is significantly delayed, please contact our customer support team with your order number for assistance.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Tracking Progress Bar */
    .tracking-progress {
        position: relative;
        padding: 20px 0;
    }
    
    .tracking-progress-bar {
        position: absolute;
        top: 50px;
        left: 0;
        width: 100%;
        height: 4px;
        background-color: #e9ecef;
        z-index: 1;
    }
    
    .tracking-progress-bar:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 62.5%; /* Adjusted based on current step (3rd out of 4) */
        height: 100%;
        background-color: var(--bs-primary);
    }
    
    .tracking-steps {
        display: flex;
        justify-content: space-between;
        position: relative;
        z-index: 2;
    }
    
    .tracking-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 25%;
        text-align: center;
    }
    
    .tracking-step-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
        color: #6c757d;
        font-size: 18px;
        z-index: 3;
    }
    
    .tracking-step.completed .tracking-step-icon {
        background-color: var(--bs-primary);
        color: white;
    }
    
    .tracking-step.current .tracking-step-icon {
        box-shadow: 0 0 0 4px rgba(var(--bs-primary-rgb), 0.25);
    }
    
    .tracking-step-content {
        width: 100%;
    }
    
    /* Shipment Timeline */
    .timeline-tracking {
        position: relative;
        padding-left: 30px;
    }
    
    .timeline-tracking:before {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 14px;
        width: 2px;
        background-color: #e9ecef;
    }
    
    .timeline-tracking-item {
        position: relative;
        padding-bottom: 25px;
    }
    
    .timeline-tracking-item:last-child {
        padding-bottom: 0;
    }
    
    .timeline-tracking-dot {
        position: absolute;
        left: -30px;
        top: 0;
        width: 28px;
        height: 28px;
        background-color: white;
        border: 2px solid var(--bs-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .timeline-tracking-dot:before {
        content: '';
        width: 12px;
        height: 12px;
        background-color: var(--bs-primary);
        border-radius: 50%;
    }
    
    .timeline-tracking-content {
        background-color: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }
    
    /* Form Focus Styles */
    .form-control:focus {
        border-color: rgba(var(--bs-primary-rgb), 0.5);
        box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
    }
    
    /* Responsive Adjustments */
    @media (max-width: 767.98px) {
        .tracking-step-content h6 {
            font-size: 0.8rem;
        }
        
        .tracking-step-content p {
            font-size: 0.7rem;
        }
        
        .tracking-step-icon {
            width: 40px;
            height: 40px;
            font-size: 14px;
        }
        
        .tracking-progress-bar {
            top: 45px;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Form validation
        const trackingForm = document.getElementById('tracking-form');
        const orderStatus = document.getElementById('order-status');
        
        // Handle form submission
        trackingForm.addEventListener('submit', function(event) {
            event.preventDefault();
            event.stopPropagation();
            
            if (trackingForm.checkValidity()) {
                // Display order number in results
                const orderNumber = document.getElementById('order-number').value;
                document.getElementById('display-order-number').textContent = orderNumber;
                
                // Hide form and show results
                trackingForm.closest('.card').style.display = 'none';
                orderStatus.style.display = 'block';
                
                // Scroll to results
                orderStatus.scrollIntoView({behavior: 'smooth'});
            }
            
            trackingForm.classList.add('was-validated');
        });
        
        // Track another order button
        document.getElementById('track-another').addEventListener('click', function() {
            // Reset form
            trackingForm.reset();
            trackingForm.classList.remove('was-validated');
            
            // Hide results and show form
            orderStatus.style.display = 'none';
            trackingForm.closest('.card').style.display = 'block';
            
            // Scroll to form
            trackingForm.scrollIntoView({behavior: 'smooth'});
        });
    });
</script>
{% endblock %} 